# IPFS分享助手：IPFS资源分享的一站式解决方案

## 摘要

为应对当前网盘分享环境中 **恶意举报**[[7](https://cangku.moe/archives/212735)]盛行的问题，本文推荐了一种基于 IPFS 的去中心化文件分享方法，并介绍了**IPFS 分享助手程序**来简化操作流程。该程序集成了文件添加、CID 拉取、计算与转换、生成分享链接等功能，可极大降低 IPFS 的使用门槛。文章还分享了一些 IPFS 资源分享的经验和技巧。通过具体使用案例，展示了程序在文件导入、链接生成、多文件聚合等方面的便利性。

本文旨在为资源分享提供一个更安全、更便捷的解决方案，欢迎大家对本程序提出建议和改进意见。


**文章目录**

![472463533124a2a7c22e76d63d90e56d.webp](https://file.cangku.moe/images/472463533124a2a7c22e76d63d90e56d.webp)


## 1. 背景

随着国内网盘审查越来越严格，传统的网盘分享方式都面临着被和谐的风险。同时，[某些恶意团体](https://cangku.moe/archives/212735)通过举报等手段打击正常的资源分享行为，使得分享环境**日益恶化**。在这样的背景下，探索更安全、更便捷的资源分享方式变得尤为重要。

[collapse title="某类团体的举报示例"]

![0e1a22e5d528e10a67e7e85eba22d1d2.gif](https://file.cangku.moe/images/0e1a22e5d528e10a67e7e85eba22d1d2.gif)

[/collapse]

**IPFS** (InterPlanetary File System) 作为一种去中心化的分布式文件系统，天然具有抗审查、多地保存等特性，为我们提供了一种资源安全分享的新思路。

## 2. 方法介绍：基于IPFS的去中心化分享

IPFS 分享的核心原理是将文件上传到 IPFS 网络，然后通过文件的哈希值 (CID) 来访问和下载。这种方式具有以下优势:

1. **去中心化**：文件存储在分布式网络中，不依赖于单一服务器，无法举报，自然也难以被删除或封禁。

2. **内容寻址**：类似 BT 通过内容哈希（CID）而非位置来定位文件，保证了文件的完整性。

3. **矿工托管**：IPFS 存储矿工存储文件可以获取收益，能够保证资源的可用性

4. **网关下载**：相比于同属去中心化的 BT ，IPFS 可以通过网关链接的方式让没有 IPFS 节点的普通下载者也能访问 IPFS 中的内容，并且**以一个不低的速度进行下载（10-20MB/s）**

[collapse title="下载测速图"] 

![472463533124a2a7c22e76d63d90e56d.webp](https://file.cangku.moe/images/009b0534b714a8d3dd3e2fc5ef53cac1.webp)

[/collapse]

当然，IPFS 也存在一些问题，如上传下载速度不稳定，使用相对复杂等。针对以上问题，本文提供了一个可以**极大简化 IPFS 分享流程**的程序，旨在让IPFS分享变得更加简单易用。

## 3. 程序功能简介

本程序集成了 **IPFS 本地文件添加**、**已上链 CID 拉取**、**计算本地文件 CID 及 CID 格式转换**、**生成分享链接**等分享相关一站式功能。主要包括:

1. **把本地文件/文件夹添加到 IPFS**：支持通过拖拽文件批量添加到本地的 IPFS 仓库

2. **由 CID 从 IPFS 网络拉取文件**：可以把被**多副本固定**在 IPFS 网络中（行话叫"**上链**"）的文件批量拉取到本地

3. **分享链接生成**：根据网关、CID、文件名快速生成分享链接，支持多种常见网关，也可自定义网关。

4. **IPFS 节点管理**：内置 IPFS 节点，无需额外安装，也可连接外部节点。

5. **WebUI 文件管理**：可通过 WebUI 查看已上传文件列表，删除文件等，以及其他 IPFS desktop 的原生功能。

## 4. GUI设计与功能介绍

![d27c55cb5d6d11a2d244621f0d2ce254.webp](https://file.cangku.moe/images/d27c55cb5d6d11a2d244621f0d2ce254.webp)

本程序的界面主要分为以下几个部分:

1. **主输入区**：支持拖入文件/文件夹或者输入 CID 进行操作，可自定义文件名、设置导入目标位置等

2. **配置选项区**：可以设置本地 IPFS 仓库的地址，导入后是否**固定**、是否在关闭程序时**自动最小化到任务栏图标**。

3. **CID 计算器**：可以计算文件的 v0 、v1 格式的 CID ，把 v0 格式的 CID 转换为 v1 格式，或者计算文件在 [酸奶网盘](https://cangku.moe/archives/212970) 中的 v1 格式的 CID ，在程序主界面上有简易计算器，支持计算完成后**一键填入主输入区**

4. **下载链接生成器**：可根据已选择的网关和当前主输入区中的内容**生成下载链接**并**一键复制到剪贴板**，可以在程序目录下的 `modules/ipfs_gateway.txt` 中自定义网关。

5. **任务栏右键菜单**：勾选关闭时最小化到任务栏选项后，关闭程序时程序不会退出且会最小化到任务栏，任务栏图标右键菜单提供有【CID计算器】和【IPFS WebUI】这两个选项。

【**注意，当有其他软件（比如酸奶网盘等）占用 IPFS 仓库时导入功能不可用，但计算器和下载链接生成器可用**】

## 5. 使用案例分享

### 5.1 导入文件并固定到本地 IPFS 中

本程序具有和 IPFS desktop 类似的导入功能，支持拖入文件或文件夹添加到本地的 IPFS 仓库中

具体如下图所示

![e304cb7e2f4f23f6871e3c6059e0fd57.webp](https://file.cangku.moe/images/e304cb7e2f4f23f6871e3c6059e0fd57.webp)

点击【IPFS WebUI】打开 WebUI 可见已导入成功

![9c4850657c4b9f3342cda25cff55e3e7.webp](https://file.cangku.moe/images/9c4850657c4b9f3342cda25cff55e3e7.webp)

### 5.2 快速生成下载链接

对于分享者来说，IPFS 下载链接的生成是一件比较繁琐的事情，我们知道下载链接的格式为【网关+CID+文件名】，生成时除了网关需要选择，文件名为了在网址链接中有效，每次都需要对文件名进行编码，显得很繁琐。

本程序支持根据当前输入框中的内容快速生成下载链接，并自动对文件名进行编码。

![3cc65b33ff821922baa0f62464c487ef.webp](https://file.cangku.moe/images/3cc65b33ff821922baa0f62464c487ef.webp)

本程序在程序同路径下的 `modules/ipfs_gateway.txt` 文件中内置了 **23**个常见的网关供选择，如有需要也可以自行在文件中添加其他自定义网关，添加后重启程序即可。

### 5.3 根据 CID 聚合多文件到一个文件夹

由于 **Crust**[[1](https://cangku.moe/archives/212812), [2](https://cangku.moe/archives/213010)] 等 IPFS 平台等上传大于 1GB 的文件时效率较低，通常推荐采用多次分批上传，获取 CID 后分别导入到一个文件夹中，然后再在 Crust 等平台中采用下单或固定（PIN）文件夹整体 CID 的方式让文件可以被网关访问。在这个操作中导入文件是很费时间的，在不使用命令行的情况下是一件非常繁琐的事情。

针对这个问题，本程序支持把 CID 批量输入到主输入框，然后指定文件名，设置导入路径，点击【导入】即可一键快速导入。

更进一步，确认文件全部上链（上传到 Crust 网络并被矿工固定产生副本）以后，可以直接通过 CID 简易计算器直接算出 CID 然后填写到主输入框中，快速导入。

![e063ded1680ede106866f450327e9c19.webp](https://file.cangku.moe/images/e063ded1680ede106866f450327e9c19.webp)

点击【IPFS WebUI】打开 WebUI 可见已导入成功

![2665dc5d091f883391b361ed0bacb029.webp](https://file.cangku.moe/images/2665dc5d091f883391b361ed0bacb029.webp)

### 5.4 使用酸奶网盘实现类秒传分享

[酸奶网盘](https://cangku.moe/archives/212970)[3] 是一个国人团队开发的基于 Crust 矿工托管的 IPFS 网盘，相比于 [Crust Files](https://crustfiles.io/files/)，酸奶网盘可以批量上传文件， 并辅助进行固定，以避免 Crust Files 网络阻塞造成的上传失败问题。

酸奶网盘计算出的 CID 和 IPFS 客户端以及 Crust Files 有所不同（效果相同），具体来说，是先计算出文件的 v0 格式 CID （Qm开头），如果文件较大就把 CID 转换为 v1 格式（ba开头）。因此酸奶网盘中的文件本质上只有 CID v0，本程序在计算器中提供了 CID v0 转换为 v1 的功能，可以直接计算文件的酸奶网盘中的 CID 或者把一个 v0 格式的 CID 转换为 v1 格式。

在算出 CID 以后，可以直接根据 CID 生成下载链接立刻发布（**即使文件仍在上传中**），由此达成**类似秒传**的分享方式，增加效率。

![f631379df3ecefe98fcdf4bb4c9e503a.webp](https://file.cangku.moe/images/f631379df3ecefe98fcdf4bb4c9e503a.webp)

注意直接上传到酸奶网盘的链接可能需要在 Crust 的 pins 中尝试固定才能被某些网关访问到，不确定的话可以直接使用下面这个公关网关：

```
https://gw.w3ipfs.cn:10443/ipfs/
```

## 6. 经验与技巧分享

### 6.1 选择合适的文件大小

虽然 IPFS 理论上支持任意大小的文件，但考虑到上传和上链效率，建议将大文件拆分为 **1GB** 左右的小文件（这也是 [Crust Files](https://crustfiles.io/files/) 可上传的最大体积）。可以使用压缩软件进行分卷压缩然后逐个上传。

### 6.2 使用多个网关

为了提高下载成功率和速度，建议在分享时提供多个公共网关的链接。IPFS分享助手已内置了常用的网关，也可以在程序同路径下的 modules/ipfs_gateway.txt 文件中添加自己信任的网关。

### 6.4 注意文件名敏感性

虽然目前 IPFS 本身不会审查文件内容，但某些网关可能会过滤敏感词（比如今后的酸奶网盘的网关）。因此在上传时，可以考虑对文件名进行简单处理，如使用缩写等，必要时可以采用 [隐写文件](https://cangku.moe/archives/211602)[6] 。

### 6.5 结合加密使用

由于 IPFS 不能保证彻底删除文件（这是其抗审查能力的体现），对于敏感度较高的文件，如果需要上传到 IPFS ，可以先进行加密再上传。这样即使文件被他人下载，没有密钥也无法查看内容。

## 7. 不足与展望

目前的程序测试仍不充分，已解决的主要问题有：

1. IPFS 本地端口被代理错误地转发到服务端的问题

2. 更新中...

今后的开发计划：

1. 在程序中集成 Crust 的 PIN 功能，可以在导入后自动尝试在 Crust 中进行固定

2. 增加网关的 Ping 功能，自动检查网关的可用性

3. 更新中...

## 8. 总结

IPFS 作为一种去中心化的文件分享方案，为我们应对**网盘审查**和**资源倒卖者的恶意举报**提供了新的思路。本文介绍的 IPFS 分享助手程序通过简化操作流程，大大降低了 IPFS 的使用门槛，使更多人能便捷地使用这一技术。程序集成了文件添加、CID 操作、链接生成等多项功能，并通过具体案例展示了其在实际使用中的优势。目前程序仍存在一些待解决的问题，未来将继续迭代优化，如集成 Crust 的 PIN 功能、增加网关可用性检查等。关于此方面欢迎大家多提意见。

随着操作难度的降低，IPFS 在资源分享领域有望有更广泛的应用，也欢迎更多人参与到 IPFS 生态的建设中来，共同探索更安全、更高效的分享方式。

## 9. Release

## 10. Virustotal查毒报告

![22755ba1cbb41f66315ab4459f78af5d.webp](https://file.cangku.moe/images/22755ba1cbb41f66315ab4459f78af5d.webp)

https://www.virustotal.com/gui/file/94a5472e0b8eca235ee1f47474a4731234e81e2ac27e9d01ba2c243fd2866dab?nocache=1

## 参考

[1] [[技巧分享] [IPFS] 无法被举报的文件分享神器CRUST IPFS操作指南 PART.I](https://cangku.moe/archives/212812)

[2] [[技巧分享] [IPFS] 无法被举报的文件分享神器CRUST IPFS操作指南 PART.II](https://cangku.moe/archives/213010)

[3] [[技巧分享] [IPFS] 基于CRUST IPFS的防举报网盘](https://cangku.moe/archives/212970)

[4] [[技巧分享] IPFS分享资源快速上手及其适用场景浅议 [资源防炸链解决方案]](https://cangku.moe/archives/212530)

[5] [[技巧分享] [IPFS] 图床教程：分享使用IPFS白嫖图床的办法](https://cangku.moe/archives/213012)

[6] [[工具分享] 隐写者：把资源嵌入MP4文件的隐写工具 [资源防炸链解决方案倡议&规避网盘审查技巧探讨]](https://cangku.moe/archives/211602)

[7] [[技巧分享] 如何应对资源倒卖者（倒狗）的举报 - 百度云篇 [资源防炸链解决方案倡议]](https://cangku.moe/archives/212735)

## 免责声明

本程序仅用于学习和研究 IPFS 技术，请勿用于任何非法用途。请遵守所在地区的相关法律法规，如有违反后果自负。
